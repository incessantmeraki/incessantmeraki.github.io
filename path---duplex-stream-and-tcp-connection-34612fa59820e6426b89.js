webpackJsonp([0xd44338d37aab],{332:function(n,a){n.exports={data:{markdownRemark:{html:'<p>Stream is one of the coolest abstraction provided by the nodejavascript core.There are three types of stream:  </p>\n<ul>\n<li>Readable </li>\n<li>Writable </li>\n<li>Readable + Writable </li>\n</ul>\n<p>Duplex stream falls under the third category. You can both read from it as well as write to it. If you like to imagine, think of duplex stream as something like telephone. It allows two way simultaneous connection. See how <strong>a</strong> is used in below statement.</p>\n<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">  a<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span></code></pre></div>\n<p>Here <strong>a</strong> is a duplex stream acting both as readable and writable stream. </p>\n<p>TCP connection in nodejavascript is a represented by socket object which is a duplex stream. So Let\'s try creating TCP connection between two nodes A and B as </p>\n<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token constant">A</span> <span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">></span> <span class="token constant">B</span></code></pre></div>\n<p>Let\'s assign A to be a server and B to be client and establish a TCP connection between them creating a <strong>client-server</strong> architecture.</p>\n<p>Let\'s make A(server) to listen on port number 8000</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">  <span class="token comment">//a.javascript</span>\n  <span class="token keyword">var</span> net <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'net\'</span><span class="token punctuation">)</span>\n  \n  <span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>socket<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n\n    <span class="token comment">//socket acting as readable stream</span>\n    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'data\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n    <span class="token comment">//socket acting as writable stream</span>\n    socket<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Hello I am A"</span><span class="token punctuation">)</span>\n\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  \n  server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">)</span></code></pre></div>\n<p>Let\'s make B(client) establish TCP connection with A(server)</p>\n<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">  <span class="token comment">//b.javascript</span>\n  <span class="token keyword">var</span> net <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'net\'</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">var</span> socket <span class="token operator">=</span> net<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">,</span> <span class="token string">\'localhost\'</span><span class="token punctuation">)</span>\n  \n  <span class="token comment">//socket acting as readable stream</span>\n  socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'data\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  <span class="token comment">//socket acting as writable stream</span>\n  socket<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Hello I am B"</span><span class="token punctuation">)</span></code></pre></div>\n<p>Here in both programs (A and B)  socket is the duplex stream that is acting as TCP to provide transport facility between A and B. </p>\n<p>Above communication architecture can be represented as :</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/0af7df70e21b755d694ca1b63c47819b/c147b/duplex.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block;  max-width: 554px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 58.664259927797836%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABJ0AAASdAHeZh94AAAB9klEQVQoz3WTa28SQRSG+f9N/GTUD/4ANUZjUxNiYogSLuWyBaRpsGDL/Sq4Bcpt9zy+6y5aCZ3sO3POzM6ZOc/MxDDwg8oM8305fvDhATtpEwwRln17aAdz932xAf0/lj34aTrx+FF2aeQn1DND1u0RTMbYaKx2gs1msFyx3bi0bMGp5nSjoLHnvORzs8MomYRUCstmsaKDX7jAd0rgOFihCOqjWJRdwM+fQ6ZIt/SOD7sKLxQob34Y8A2vuPWWjNdbWC2x9VJb3XGs2IHj+WuW2tmlnHU0GAv/ihgsVM3VzkPbVpLWMWVoG40NxNU1lqxYqD7KsEUrYqijCZYRUm0Zu77D6kOs2sHPqvNaqg3YdXpMZ3UG97dstr/4rtVea0pzz/AJT/l006SXSEDyK/55GnPyUL5QsCpcSlcVqFbkl6EkFcQz5dArvuVsV+WZAhX2DON8pK/cZhZt3Q9lj/Czv1JO5rGV05Ht/c8wLItIAa4AkbnSXcSW0GYt/bSQaVQ2FgCLAmbI4M5XeP0+k+mU8XzO/XCg66M04zksfo59EYKcEJxmIJHHJK4auC2H5K6ui/cg5RNOOBu3aQR3LpcLVathvS421rEOdRj9nvwejGQPArutQ7phVk+T3tZ5r0Df9gErVtIT89gcMOKI/9jTc+2f9xuvCJQrW0adKQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="1"\n        title=""\n        src="/static/0af7df70e21b755d694ca1b63c47819b/c147b/duplex.png"\n        srcset="/static/0af7df70e21b755d694ca1b63c47819b/29bd5/duplex.png 148w,\n/static/0af7df70e21b755d694ca1b63c47819b/ec5d8/duplex.png 295w,\n/static/0af7df70e21b755d694ca1b63c47819b/c147b/duplex.png 554w"\n        sizes="(max-width: 554px) 100vw, 554px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Now let us run the above programs(a.javascript and b.javascript)</p>\n<p>Open up a terminal and run program a</p>\n<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">  $ node a.javascript</code></pre></div>\n<p>Open another terminal and run program b.</p>\n<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">  $ node b.javascript</code></pre></div>\n<p>If there are no errors in the program , it should printing something like this:</p>\n<p>a.javascript outputs </p>\n<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">  Hello I am B</code></pre></div>\n<p>b.javascript outputs</p>\n<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">  Hello I am A</code></pre></div>\n<p>Here A and B have tcp connection between each other and are receiving what the other end is sending to it and printing it.</p>\n<h2>Learn more about streams</h2>\n<ul>\n<li><a href="https://github.com/substack/stream-handbook">Stream Handbook</a></li>\n<li><a href="https://github.com/workshopper/stream-adventure">Stream Adventure Workshop</a></li>\n</ul>',frontmatter:{title:"Duplex stream and TCP connection"}}},pathContext:{slug:"/duplex-stream-and-tcp-connection/"}}}});
//# sourceMappingURL=path---duplex-stream-and-tcp-connection-34612fa59820e6426b89.js.map